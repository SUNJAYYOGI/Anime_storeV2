{% extends 'base.html' %}

{% block title %}{{ anime.title }} | Anime Store{% endblock %}

{% block content %}
<h1 class="h1-heading">{{ anime.title }}</h1>

<div class="anime-detail-container">
  <img class="anime-detail-img" src="{{ anime.thumbnail_url }}" alt="{{ anime.title }}">

  <p class="anime-description">{{ anime.description }}</p>

  <!-- Trailer Section -->
  {% if anime.trailer_url %}
    <div class="trailer-container" style="margin: 20px 0;">
      <h2>Trailer</h2>
      <iframe width="560" height="315"
              src="{{ anime.trailer_url|replace:'watch?v=','embed/' }}"
              title="Trailer for {{ anime.title }}"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen>
      </iframe>
    </div>
  {% endif %}

  <h2 class="episode-heading">Episodes</h2>
  <ul class="episode-list">
    {% for episode in anime.episodes.all %}
      <li class="episode-item">
        <strong>{{ episode.title }}</strong>
        <a href="{{ episode.video_link }}" target="_blank" class="watch-link">Watch or download</a>
      </li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
